{"date":"2024-06-15T19:28:35.469Z","courseId":"17","assignment":"AP-Spring03-CA6-phase3","trace":{"version":151,"content":"#include \"UTMS.hpp\"\n#include \"Orders.hpp\"\n#include \"/home/sajjad/AP_A6/finish/server/server.hpp\"\n#include \"/home/sajjad/AP_A6/finish/examples/handlers.hpp\"\n#include \"/home/sajjad/AP_A6/finish/globalStuff.hpp\"\n// int main(int argc, char *argv[])\n// {\n//     if (argc != 5)\n//     {\n//         cout << ERROR<<endl;\n//         return 0;\n//     }\n//     vector<string> pathes;\n\n//     for (int i = 1; i < 5; i++)\n//     {\n//         pathes.push_back(argv[i]);\n//     }\n//     UTMS *utms = new UTMS(pathes);\n//     Orders *orders = new Orders(utms);\n//     orders->input();\n//     delete orders;\n//     delete utms;\n//     return 1;\n// }\n\nvoid mapServerPaths(Server &server, Orders *orders)\n{\n    server.setNotFoundErrPage(\"static/404.html\");\n\n    server.get(\"/\", new ShowPage(\"static/logincss.html\"));\n    server.post(\"/login\", new LoginHandler(orders));\n\n    server.get(\"/logout\",new LogoutHandler(orders));\n\n    server.get(\"/home\", new ShowPage(\"static/home.html\"));\n    server.get(\"/home.png\", new ShowPage(\"static/home.png\"));\n}\n\nint main(int argc, char **argv)\n{\n\n    if (argc != 5)\n    {\n        cout << ERROR << endl;\n        return 0;\n    }\n    vector<string> pathes;\n    for (int i = 1; i < 5; i++)\n    {\n        pathes.push_back(argv[i]);\n    }\n    UTMS *utms = new UTMS(pathes);\n    Orders *orders = new Orders(utms);\n    try\n    {\n        int port = 5000;\n        Server server(port);\n\n        mapServerPaths(server, orders);\n\n        cout << \"Server running on port: \" << port << endl;\n        server.run();\n    }\n    catch (const invalid_argument &e)\n    {\n        cerr << e.what() << endl;\n        delete orders;\n        delete utms;\n    }\n    catch (const Server::Exception &e)\n    {\n        cerr << e.getMessage() << endl;\n        delete orders;\n        delete utms;\n    }\n    delete orders;\n    delete utms;\n    return 0;\n}\n","filename":"/home/sajjad/AP_A6/finish/main.cpp","identifier":"Text Change","lineCount":81,"languageId":"cpp"},"failed":false}