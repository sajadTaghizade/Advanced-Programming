{"date":"2024-06-15T15:26:57.199Z","courseId":"17","assignment":"AP-Spring03-CA6-phase3","trace":{"version":3,"content":"#include \"handlers.hpp\"\n\n#include <cstdlib>\n#include <iostream>\n\nResponse* RandomNumberHandler::callback(Request* req) {\n    Response* res = new Response();\n    res->setHeader(\"Content-Type\", \"text/html\");\n\n    std::string randomNumber = std::to_string(std::rand() % 10 + 1);\n    std::string body;\n\n    body += \"<!DOCTYPE html>\";\n    body += \"<html lang=\\\"en\\\">\";\n\n    body += \"<head>\";\n    body += \"  <title>Random Number Page</title>\";\n    body += \"</head>\";\n\n    body += \"<body style=\\\"text-align: center;\\\">\";\n    body += \"  <h1>AP HTTP</h1>\";\n    body += \"  <p>A random number in [1, 10] is: \" + randomNumber + \"</p>\";\n    body += \"  <p>SessionId: \" + req->getSessionId() + \"</p>\";\n    body += \"</body>\";\n\n    body += \"</html>\";\n    res->setBody(body);\n    return res;\n}\n\nResponse* LoginHandler::callback(Request* req) {\n    std::string id = req->getBodyParam(\"id\");\n    std::string password = req->getBodyParam(\"password\");\n    if (id == \"root\") {\n        throw Server::Exception(\"Remote root access has been disabled.\");\n    }\n    std::cout << \"id: \" << id << \",\\tpassword: \" << password << std::endl;\n    Response* res = Response::redirect(\"/rand\");\n    res->setSessionId(\"SID\");\n    return res;\n}\n\nResponse* UploadHandler::callback(Request* req) {\n    std::string name = req->getBodyParam(\"file_name\");\n    std::string file = req->getBodyParam(\"file\");\n    utils::writeToFile(file, name);\n    Response* res = Response::redirect(\"/\");\n    return res;\n}\n\nColorHandler::ColorHandler(const std::string& filePath)\n    : TemplateHandler(filePath) {}\n\nstd::map<std::string, std::string> ColorHandler::handle(Request* req) {\n    std::string newName = \"I am \" + req->getQueryParam(\"name\");\n    std::map<std::string, std::string> context;\n    context[\"name\"] = newName;\n    context[\"color\"] = req->getQueryParam(\"color\");\n    return context;\n}\n","filename":"/home/sajjad/AP_A6/finish/examples/handlers.cpp","identifier":"Text Change","lineCount":61,"languageId":"cpp"},"failed":false}