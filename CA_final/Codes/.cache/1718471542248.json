{"date":"2024-06-15T17:12:21.129Z","courseId":"17","assignment":"AP-Spring03-CA6-phase3","trace":{"version":206,"content":"#include \"handlers.hpp\"\n\n#include <cstdlib>\n#include <iostream>\n\nusing namespace std;\n\nLoginHandler::LoginHandler(Orders *orders)\n{\n    MY_orders = orders;\n}\n\nResponse *RandomNumberHandler::callback(Request *req)\n{\n    Response *res = new Response();\n    res->setHeader(\"Content-Type\", \"text/html\");\n\n    string randomNumber = to_string(rand() % 10 + 1);\n    string body;\n\n    body += \"<!DOCTYPE html>\";\n    body += \"<html lang=\\\"en\\\">\";\n\n    body += \"<head>\";\n    body += \"  <title>Random Number Page</title>\";\n    body += \"</head>\";\n\n    body += \"<body style=\\\"text-align: center;\\\">\";\n    body += \"  <h1>AP HTTP</h1>\";\n    body += \"  <p>A random number in [1, 10] is: \" + randomNumber + \"</p>\";\n    body += \"  <p>SessionId: \" + req->getSessionId() + \"</p>\";\n    body += \"</body>\";\n\n    body += \"</html>\";\n    res->setBody(body);\n    return res;\n}\n\nResponse *LoginHandler::callback(Request *req)\n{\n\n    string username = req->getBodyParam(\"username\");\n    string password = req->getBodyParam(\"password\");\n    if (username == \"root\")\n    {\n        throw Server::Exception(\"Remote root access has been disabled.\");\n    }\n    MY_orders->Post_login(MY_orders->get_info(), username, password);\n    Response *res = Response::redirect(\"/home\");\n    res->setSessionId(\"SID\");\n    return res;\n}\n\nResponse *UploadHandler::callback(Request *req)\n{\n    string name = req->getBodyParam(\"file_name\");\n    string file = req->getBodyParam(\"file\");\n    utils::writeToFile(file, name);\n    Response *res = Response::redirect(\"/\");\n    return res;\n}\n\nColorHandler::ColorHandler(const string &filePath)\n    : TemplateHandler(filePath) {}\n\nmap<string, string> ColorHandler::handle(Request *req)\n{\n    string newName = \"I am \" + req->getQueryParam(\"name\");\n    map<string, string> context;\n    context[\"name\"] = newName;\n    context[\"color\"] = req->getQueryParam(\"color\");\n    return context;\n}\n","filename":"/home/sajjad/AP_A6/finish/examples/handlers.cpp","identifier":"Text Change","lineCount":74,"languageId":"cpp"},"failed":false}